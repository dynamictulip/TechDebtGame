@using TechDebtGame.Pages
<div>
    <CascadingValue Value="this">
        <CascadingValue Value="GameManager">
            @ChildContent
        </CascadingValue>
    </CascadingValue>
</div>

@code {

    [Parameter]
    public GameManager GameManager { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public EventCallback<IGameCardModel> OnStatusUpdated { get; set; }

    public IGameCardModel Payload { get; set; }

    public async Task UpdateCardAsync(GameCardListType gameCardListType)
    {
        var cardModel = Payload;

        if (GameManager.MoveCard(cardModel, gameCardListType))
            await OnStatusUpdated.InvokeAsync(Payload);
    }

}